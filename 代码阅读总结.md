# 读懂程式码

**先了解系统架构与行为模式，再细度**

以便在需要了解任何片段的细节实作时能够快速找到具体的程式码位置。此时再开始细度。

1. 了解
2. 修改、扩充
3. 抽取、提炼

**熟悉沟通语言与惯例用语**

**掌握撰写者的心态与习惯**

# 摸清架构

由上至下，先捕捉系统架构性观念，不要过早钻进细节。不需要从第一行读起。

**了解全貌**

知道系统架构属于哪种类型，可以知道各个组成之间的关系。比如知道每收到一个请求总会有相对应的服务器来处理。想关注某个请求如何处理时应该找出这个请求对应的服务器。

**层次感**

不论是哪一层的架构都会定义出各自的角色以及角色间的关系，了解某个特定的架构中，究竟存在多少角色，以及这些角色之间的互动模式，可以帮助了解整个系统的运作方式。

例如事件驱动式架构：事件处理的分配器+事件产生者+事件处理者。当知道此类应用程式皆为事件驱动式架构时，便可得知有三种主要的角色。虽然还不清楚需要处理多少事件 的类型。

**1、找出系统如何初始化**

目标放在界定其中的角色以及角色间的静态、动态关系。可以知道系统做了什么准备。

**2、与这个系统相接的其他系统有哪些，界面是什么**

界定出系统的边界。其他系统可能会提供输入或接收输出。确定系统的外观。

**3、系统如何反应各种事件**

系统本身的主要行为模式

**4、如何处理各种异常及错误**

# 优质工具

使用好的整合式开发环境IDE或文字编辑器。

随着程式中的某个控制流，将阅读的重心从某个函式移至它所调用的另一个函式。可以马上知道调用时传入的各个参数的意义。

**grep**

允许搜寻某个目录中所有指定方案是否有符合指定条件的语句。在阅读时遇到不认识但自认为重要的类、函数、结构、变量，可以找出。

**gtags**

可以建立索引。grep每次搜寻会逐一找出所有，而且不会剖析语言语法。

gtags全局标记，可以只针对和语言有关的元素（类名，函数名）。可以索引，有效寻找关键段落。提供基于命令行的程式，可以在代码所在目录建立索引。可以针对索引结构搜寻以及检索。

**htags**

制作HTML文件。将已制作完成的索引结构制作成一组相互参考的HTML问价。

# 望文生义，推敲组件作用

建立系统的架构性认识，透过名称及命名惯例，可以推测出各组件的作用。

阅读细节前，先捕捉系统运作情景。架构是最顶端，运作情景是它之下的另一个层次。

**拼凑故事**

**归纳常见架构模式**

一边读一边记录文件。

**无法望文生义的先预看一层**

**根据需要了解的粒度决定展开的层数**



# 找到程式入口







# 总结